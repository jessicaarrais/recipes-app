(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{100:function(e,n,t){},101:function(e,n,t){},102:function(e,n,t){},103:function(e,n,t){},104:function(e,n,t){},109:function(e,n,t){"use strict";t.r(n);var a=t(5),r=t(51),c=t(6);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var i=t(0),o=t.n(i),l=t(71),u=t.n(l),s=t(7),d=t(17),m=t(4),p=t(75),v=t(27);function b(){var e=Object(c.a)(["\n  extend type Query {\n    isLoggedIn: Boolean!\n    username: String\n  }\n"]);return b=function(){return e},e}var g=t.n(v)()(b()),E=t(24);t(81);var f=function(e){return o.a.createElement("button",{type:e.type,className:"base ".concat(e.actionType),disabled:e.disabled,onClick:e.handleOnClick},e.children)};var h=function(e){return o.a.createElement("span",{className:"material-icons"},e.icon)};var I=function(){return o.a.createElement(E.a,{to:"/recipes-app/account-settings"},o.a.createElement(f,{actionType:"default"},o.a.createElement(h,{icon:"menu"})))};function O(){var e=Object(c.a)(["\n  mutation DeleteUser {\n    deleteUser {\n      me {\n        id\n        email\n      }\n    }\n  }\n"]);return O=function(){return e},e}var k=Object(m.gql)(O());var j=function(){var e=Object(m.useApolloClient)(),n=Object(s.g)(),t=Object(m.useMutation)(k,{onCompleted:function(){localStorage.clear(),e.cache.reset(),n.push("/recipes-app/home")}}),r=Object(a.a)(t,2),c=r[0],i=r[1],l=i.loading,u=i.error;return l?o.a.createElement("h1",null,"Loading..."):u?o.a.createElement("h1",null,"An error has occurred. $",u.message):o.a.createElement("div",null,o.a.createElement(f,{type:"button",actionType:"danger",handleOnClick:function(){return c()}},o.a.createElement(h,{icon:"delete_forever"}),"delete account"))},$=t(74),y=t.n($);t(91);var C=function(e){return o.a.createElement("img",{alt:"user's avatar",src:e.uri?e.uri:y.a})};function S(){var e=Object(c.a)(["\n  mutation UploadAvatar($file: Upload!) {\n    uploadAvatar(file: $file) {\n      success\n      message\n      me {\n        id\n        avatar {\n          uri\n        }\n      }\n    }\n  }\n"]);return S=function(){return e},e}var x=Object(m.gql)(S());var w=function(e){var n=Object(i.useState)(null),t=Object(a.a)(n,2),r=t[0],c=t[1],l=Object(m.useMutation)(x,{onCompleted:function(e){e.uploadAvatar.success||c(e.uploadAvatar.message)}}),u=Object(a.a)(l,2),s=u[0],d=u[1],p=d.loading,v=d.error;return p?o.a.createElement("h1",null,"Loading..."):v?o.a.createElement("h1",null,"An error has occurred. $",v.message):o.a.createElement("div",null,o.a.createElement("label",{htmlFor:"avatar"},"Upload photo"),o.a.createElement("input",{id:"avatar",type:"file",onChange:function(e){var n=e.target,t=n.validity,a=n.files,r=null===a||void 0===a?void 0:a[0];t.valid&&s({variables:{file:r}})}}),r&&o.a.createElement("p",null,r),o.a.createElement("div",{style:{width:"100px"}},o.a.createElement(C,{uri:e.uri})))};t(92);var N=function(e){var n=Object(i.useState)(e.children),t=Object(a.a)(n,2),r=t[0],c=t[1],l=Object(i.useState)(!1),u=Object(a.a)(l,2),s=u[0],d=u[1],m=function(n){d(!1),n!==e.children&&e.onSubmit(n)};return o.a.createElement(o.a.Fragment,null,s?o.a.createElement("input",{className:"editable-input-".concat(e.semanticalType),ref:function(e){e&&e.focus()},type:"text",value:r,onChange:function(e){return c(e.target.value)},onKeyDown:function(e){"Enter"===e.key&&m(r)},onBlur:function(){return m(r)}}):o.a.createElement("span",{className:"editable-span-".concat(e.semanticalType),tabIndex:0,onClick:function(){d(!0),c(e.children)},onKeyDown:function(n){"Enter"===n.key&&(d(!0),c(e.children))}},e.children))};function q(){var e=Object(c.a)(["\n  mutation UpdateUser($username: String) {\n    updateUser(username: $username) {\n      success\n      message\n      me {\n        id\n        username\n      }\n    }\n  }\n"]);return q=function(){return e},e}var T=Object(m.gql)(q());var A=function(e){var n=Object(i.useState)(null),t=Object(a.a)(n,2),r=t[0],c=t[1],l=Object(m.useMutation)(T,{onCompleted:function(e){e.updateUser.success?c(null):c(e.updateUser.message)}}),u=Object(a.a)(l,2),s=u[0],d=u[1].error;return d?o.a.createElement("h1",null,"An error has occurred. $",d.message):o.a.createElement(o.a.Fragment,null,o.a.createElement(N,{semanticalType:"p",onSubmit:function(e){s({variables:{username:e}})}},e.username),o.a.createElement("p",null,r),o.a.createElement(w,{uri:e.uri}),o.a.createElement(j,null))};var D=function(e){var n=Object(m.useApolloClient)(),t=Object(s.g)();return o.a.createElement(o.a.Fragment,null,o.a.createElement(E.a,{to:"/recipes-app/home"},"Back to Home"),o.a.createElement(f,{type:"button",actionType:"default",handleOnClick:function(){localStorage.clear(),n.cache.reset(),t.push("/recipes-app/home")}},"Logout"),o.a.createElement(A,{username:e.username,uri:e.uri}))};function M(){var e=Object(c.a)(["\n  mutation DeleteIngredient($ingredientId: ID!, $recipeId: ID!) {\n    deleteIngredient(ingredientId: $ingredientId, recipeId: $recipeId) {\n      recipe {\n        id\n        ingredients {\n          id\n        }\n      }\n    }\n  }\n"]);return M=function(){return e},e}var U=Object(m.gql)(M());var L=function(e){var n=Object(m.useMutation)(U),t=Object(a.a)(n,2),r=t[0],c=t[1].error;return c?o.a.createElement("h1",null,"An error has occurred. $",c.message):o.a.createElement(f,{type:"button",actionType:"danger",handleOnClick:function(){return r({variables:e})}},o.a.createElement(h,{icon:"clear"}))};t(93);function R(){var e=Object(c.a)(["\n  mutation UpdateIngredient(\n    $ingredientId: ID!\n    $text: String\n    $isChecked: Boolean\n    $recipeId: ID!\n  ) {\n    updateIngredient(\n      ingredientId: $ingredientId\n      text: $text\n      isChecked: $isChecked\n      recipeId: $recipeId\n    ) {\n      ingredient {\n        id\n        recipeId\n        text\n        isChecked\n      }\n    }\n  }\n"]);return R=function(){return e},e}var F=Object(m.gql)(R());var _=function(e){var n=Object(m.useMutation)(F),t=Object(a.a)(n,2),r=t[0],c=t[1].error;return c?o.a.createElement("h1",null,"An error has occurred. $",c.message):o.a.createElement("input",{className:"ingredient-checkbox",type:"checkbox",checked:e.isChecked,onChange:function(n){var t;(t=n.target.checked)!==e.isChecked&&r({variables:{ingredientId:e.ingredientId,isChecked:t,recipeId:e.recipeId}})}})};function P(){var e=Object(c.a)(["\n  mutation UpdateIngredient(\n    $ingredientId: ID!\n    $text: String\n    $isChecked: Boolean\n    $recipeId: ID!\n  ) {\n    updateIngredient(\n      ingredientId: $ingredientId\n      text: $text\n      isChecked: $isChecked\n      recipeId: $recipeId\n    ) {\n      ingredient {\n        id\n        recipeId\n        text\n        isChecked\n      }\n    }\n  }\n"]);return P=function(){return e},e}var B=Object(m.gql)(P());var Q=function(e){var n=Object(m.useMutation)(B),t=Object(a.a)(n,2),r=t[0],c=t[1].error;return c?o.a.createElement("h1",null,"An error has occurred. $",c.message):o.a.createElement(N,{semanticalType:"p",onSubmit:function(n){r({variables:{ingredientId:e.ingredientId,text:n,recipeId:e.recipeId}})}},e.text)};t(94);function z(){var e=Object(c.a)(["\n  fragment IngredientFragment on Ingredient {\n    __typename\n    id\n    recipeId\n    text\n    isChecked\n  }\n"]);return z=function(){return e},e}var J=Object(m.gql)(z());var K=function(e){var n=Object(i.useState)(!1),t=Object(a.a)(n,2),r=t[0],c=t[1];return o.a.createElement("li",{className:"ingredient-list",onMouseOver:function(){return c(!0)},onMouseLeave:function(){return c(!1)}},o.a.createElement(_,{ingredientId:e.id,isChecked:e.isChecked,recipeId:e.recipeId}),o.a.createElement(Q,{ingredientId:e.id,text:e.text,recipeId:e.recipeId}),r&&o.a.createElement("div",null,o.a.createElement(L,{ingredientId:e.id,recipeId:e.recipeId})))};function W(){var e=Object(c.a)(["\n  mutation CreateIngredient($text: String, $isChecked: Boolean, $recipeId: ID!) {\n    createIngredient(text: $text, isChecked: $isChecked, recipeId: $recipeId) {\n      success\n      message\n      recipe {\n        id\n        title\n        ingredients {\n          ...IngredientFragment\n        }\n      }\n    }\n  }\n  ","\n"]);return W=function(){return e},e}var Y=Object(m.gql)(W(),J);var Z=function(e){var n=Object(m.useMutation)(Y),t=Object(a.a)(n,1)[0];return o.a.createElement(f,{type:"button",actionType:"primary",handleOnClick:function(){return t({variables:{recipeId:e.recipeId,text:"New Ingredient",isChecked:!1}})}},o.a.createElement(h,{icon:"add"}),"add ingredient")};function H(){var e=Object(c.a)(["\n  mutation CreateInstruction($step: String, $text: String, $recipeId: ID!) {\n    createInstruction(step: $step, text: $text, recipeId: $recipeId) {\n      recipe {\n        id\n        instructions {\n          id\n          recipeId\n          step\n          text\n        }\n      }\n    }\n  }\n"]);return H=function(){return e},e}var G=Object(m.gql)(H());var V=function(e){var n=Object(m.useMutation)(G),t=Object(a.a)(n,1)[0];return o.a.createElement(f,{type:"button",actionType:"primary",handleOnClick:function(){return t({variables:{recipeId:e.recipeId,step:"Step: ",text:"Instruction"}})}},o.a.createElement(h,{icon:"add"}),"add instruction")};function X(){var e=Object(c.a)(["\n  mutation DeleteRecipe($recipeId: ID!, $cookbookId: ID!) {\n    deleteRecipe(recipeId: $recipeId, cookbookId: $cookbookId) {\n      cookbook {\n        id\n        recipes {\n          id\n        }\n      }\n    }\n  }\n"]);return X=function(){return e},e}var ee=Object(m.gql)(X());var ne=function(e){var n=Object(m.useMutation)(ee),t=Object(a.a)(n,1)[0];return o.a.createElement(f,{type:"button",actionType:"danger",handleOnClick:function(){return t({variables:e})}},o.a.createElement(h,{icon:"delete"}),"delete recipe")};function te(){var e=Object(c.a)(["\n  mutation DeleteInstruction($instructionId: ID!, $recipeId: ID!) {\n    deleteInstruction(instructionId: $instructionId, recipeId: $recipeId) {\n      recipe {\n        id\n        instructions {\n          id\n        }\n      }\n    }\n  }\n"]);return te=function(){return e},e}var ae=Object(m.gql)(te());var re=function(e){var n=Object(m.useMutation)(ae),t=Object(a.a)(n,2),r=t[0],c=t[1].error;return c?o.a.createElement("h1",null,"An error has occurred. $",c.message):o.a.createElement(f,{type:"button",actionType:"danger",handleOnClick:function(){return r({variables:e})}},o.a.createElement(h,{icon:"clear"}))};function ce(){var e=Object(c.a)(["\n  mutation UpdateInstruction(\n    $instructionId: ID!\n    $step: String\n    $text: String\n    $recipeId: ID!\n  ) {\n    updateInstruction(\n      instructionId: $instructionId\n      step: $step\n      text: $text\n      recipeId: $recipeId\n    ) {\n      instruction {\n        id\n        step\n      }\n    }\n  }\n"]);return ce=function(){return e},e}var ie=Object(m.gql)(ce());var oe=function(e){var n=Object(m.useMutation)(ie),t=Object(a.a)(n,1)[0];return o.a.createElement(N,{semanticalType:"p",onSubmit:function(n){t({variables:{instructionId:e.instructionId,step:n,recipeId:e.recipeId}})}},e.step)};function le(){var e=Object(c.a)(["\n  mutation UpdateInstruction(\n    $instructionId: ID!\n    $step: String\n    $text: String\n    $recipeId: ID!\n  ) {\n    updateInstruction(\n      instructionId: $instructionId\n      step: $step\n      text: $text\n      recipeId: $recipeId\n    ) {\n      instruction {\n        id\n        text\n      }\n    }\n  }\n"]);return le=function(){return e},e}var ue=Object(m.gql)(le());var se=function(e){var n=Object(m.useMutation)(ue),t=Object(a.a)(n,1)[0];return o.a.createElement(N,{semanticalType:"p",onSubmit:function(n){t({variables:{instructionId:e.instructionId,text:n,recipeId:e.recipeId}})}},e.text)};t(95);var de=function(e){var n=Object(i.useState)(!1),t=Object(a.a)(n,2),r=t[0],c=t[1];return o.a.createElement("li",{className:"instruction-list",onMouseOver:function(){return c(!0)},onMouseLeave:function(){return c(!1)}},o.a.createElement("div",{className:"instructions-container"},o.a.createElement(oe,{instructionId:e.id,recipeId:e.recipeId,step:e.step}),o.a.createElement(se,{instructionId:e.id,recipeId:e.recipeId,text:e.text})),r&&o.a.createElement("div",null,o.a.createElement(re,{instructionId:e.id,recipeId:e.recipeId})))};t(96);function me(){var e=Object(c.a)(["\n  mutation UpdateRecipe($recipeId: ID!, $title: String, $cookbookId: ID!) {\n    updateRecipe(recipeId: $recipeId, title: $title, cookbookId: $cookbookId) {\n      recipe {\n        id\n        title\n      }\n    }\n  }\n"]);return me=function(){return e},e}var pe=Object(m.gql)(me());var ve=function(e){var n=Object(m.useMutation)(pe),t=Object(a.a)(n,2),r=t[0],c=t[1].error;return c?o.a.createElement("h1",null,"An error has occurred. $",c.message):o.a.createElement("div",{className:"recipe-title-container"},o.a.createElement(N,{semanticalType:"h2",onSubmit:function(n){return r({variables:{recipeId:e.id,title:n,cookbookId:e.cookbookId}})}},e.title))};t(97);function be(){var e=Object(c.a)(["\n  fragment RecipeFragment on Recipe {\n    __typename\n    id\n    cookbookId\n    title\n    ingredients {\n      ...IngredientFragment\n    }\n    instructions {\n      id\n      recipeId\n      step\n      text\n    }\n  }\n  ","\n"]);return be=function(){return e},e}var ge=Object(m.gql)(be(),J);var Ee=function(e){return o.a.createElement("li",{className:"recipe-li"},o.a.createElement("div",{className:"recipe-header"},o.a.createElement(ve,{id:e.id,cookbookId:e.cookbookId,title:e.title}),o.a.createElement("div",null,o.a.createElement(f,{type:"button",actionType:"secondary"},o.a.createElement(h,{icon:"favorite_border"})))),o.a.createElement("ul",null,e.ingredients.map((function(e){return o.a.createElement(K,{key:e.id,id:e.id,recipeId:e.recipeId,isChecked:e.isChecked,text:e.text})}))),e.instructions&&o.a.createElement("ul",null,e.instructions.map((function(e){return o.a.createElement(de,{key:e.id,id:e.id,recipeId:e.recipeId,step:e.step,text:e.text})}))),o.a.createElement("div",{className:"recipe-btns-container"},o.a.createElement("div",{className:"create-todo-container"},o.a.createElement(Z,{recipeId:e.id})),o.a.createElement("div",{className:"create-instruction-container"},o.a.createElement(V,{recipeId:e.id})),o.a.createElement("div",{className:"delete-recipe-container"},o.a.createElement(ne,{recipeId:e.id,cookbookId:e.cookbookId}))))};function fe(){var e=Object(c.a)(["\n  mutation CreateRecipe($title: String, $cookbookId: ID!) {\n    createRecipe(title: $title, cookbookId: $cookbookId) {\n      cookbook {\n        id\n        recipes {\n          ...RecipeFragment\n        }\n      }\n    }\n  }\n  ","\n"]);return fe=function(){return e},e}var he=Object(m.gql)(fe(),ge);var Ie=function(e){var n=Object(m.useMutation)(he),t=Object(a.a)(n,2),r=t[0],c=t[1].error;return c?o.a.createElement("h1",null,"An error has occurred. $",c.message):o.a.createElement(f,{type:"button",actionType:"primary",handleOnClick:function(){return r({variables:{title:"Title",cookbookId:e.cookbookId}})}},o.a.createElement(h,{icon:"create"}),"New Recipe1")};t(98);var Oe=function(e){return o.a.createElement("div",null,o.a.createElement("div",{className:"notebook-header"},o.a.createElement("div",{className:"create-sheet-container"},o.a.createElement(Ie,{cookbookId:e.id})),o.a.createElement("div",{className:"notebook-list-organizers-container"},o.a.createElement("div",{className:"filter-list-container"},o.a.createElement(f,{type:"button",actionType:"default"},o.a.createElement(h,{icon:"filter_list"}))),o.a.createElement("div",{className:"sort-list-container"},o.a.createElement(f,{type:"button",actionType:"default"},o.a.createElement(h,{icon:"sort"}))))),o.a.createElement("ul",{className:"notebook-ul"},e.recipes.map((function(e){return o.a.createElement(Ee,{key:e.id,id:e.id,cookbookId:e.cookbookId,title:e.title,ingredients:e.ingredients,instructions:e.instructions})}))))};var ke=function(e){return o.a.createElement("div",null,o.a.createElement(Oe,{id:e.cookbookId,recipes:e.recipes}))};function je(e){return e.trim().replaceAll(" ","-").toLowerCase()}t(99);function $e(){var e=Object(c.a)(["\n  query SearchRecipes($value: String) {\n    searchRecipes(value: $value) {\n      id\n      title\n    }\n  }\n"]);return $e=function(){return e},e}var ye=Object(m.gql)($e());function Ce(){var e=Object(s.g)(),n=Object(i.useState)(""),t=Object(a.a)(n,2),r=t[0],c=t[1];return o.a.createElement("div",{className:"search-container"},o.a.createElement("input",{type:"text",value:r,placeholder:"Search Recipes",onChange:function(e){return c(e.target.value)}}),o.a.createElement(f,{type:"button",actionType:"secondary",disabled:""===r,handleOnClick:function(){e.push("/recipes-app/search/".concat(r)),c("")}},o.a.createElement(h,{icon:"search"})))}function Se(){var e=Object(s.h)().value,n=Object(m.useQuery)(ye,{variables:{value:e}}),t=n.data,a=n.loading,r=n.error;return a?o.a.createElement("h1",null,"Loading..."):r?o.a.createElement("h1",null,"An error has occurred. $",r.message):(null===t||void 0===t?void 0:t.searchRecipes.length)>0?o.a.createElement("ul",null,t.searchRecipes.map((function(e){var n=je(e.title);return o.a.createElement(E.a,{to:"/recipes-app/".concat(n,"/").concat(e.id),key:e.id},o.a.createElement("li",null,o.a.createElement("h3",null,e.title)))}))):o.a.createElement("p",null,"Could not find a recipe")}t(100);var xe=function(e){var n=Object(s.g)();return o.a.createElement(o.a.Fragment,null,o.a.createElement("nav",{className:"navbar"},o.a.createElement("div",null,o.a.createElement("span",{onClick:function(){return n.push("/recipes-app/home")}}),o.a.createElement(Ce,null)),o.a.createElement("div",null,e.rightItems)),o.a.createElement("div",{className:"navbar-padding"}))};function we(){var e=Object(c.a)(["\n  query Recipe($recipeId: ID!) {\n    recipe(recipeId: $recipeId) {\n      id\n      title\n      ingredients {\n        id\n        text\n      }\n      instructions {\n        id\n        step\n        text\n      }\n    }\n  }\n"]);return we=function(){return e},e}var Ne=Object(m.gql)(we());var qe=function(){var e=Object(s.h)().recipeId,n=Object(m.useQuery)(Ne,{variables:{recipeId:e}}),t=n.data,a=n.loading,r=n.error;return a?o.a.createElement("h1",null,"Loading..."):r?o.a.createElement("h1",null,"An error has occurred. $",r.message):o.a.createElement("div",null,o.a.createElement("h2",null,null===t||void 0===t?void 0:t.recipe.title),o.a.createElement("h3",null,"Ingredients"),o.a.createElement("ul",null,null===t||void 0===t?void 0:t.recipe.ingredients.map((function(e){return o.a.createElement("li",{key:e.id},e.text)}))),o.a.createElement("hr",null),o.a.createElement("h3",null,"Instructions"),null===t||void 0===t?void 0:t.recipe.instructions.map((function(e){return o.a.createElement("div",{key:e.id},o.a.createElement("p",null,e.step),o.a.createElement("p",null,e.text))})))};var Te=function(e){return o.a.createElement(E.a,{to:"/recipes-app/users/".concat(e.username),className:"nav-link"},o.a.createElement("span",{className:"nav-span-username"},e.username),o.a.createElement("div",{className:"nav-avatar"},o.a.createElement(C,{uri:e.uri})))};t(101);function Ae(){var e=Object(c.a)(["\n  query User($username: String) {\n    user(username: $username) {\n      id\n      username\n      avatar {\n        uri\n      }\n      cookbook {\n        recipes {\n          id\n          title\n          ingredients {\n            id\n            text\n          }\n          instructions {\n            id\n            step\n            text\n          }\n        }\n      }\n    }\n  }\n"]);return Ae=function(){return e},e}var De=Object(m.gql)(Ae());var Me=function(){var e,n=Object(s.h)().username,t=Object(m.useQuery)(De,{variables:{username:n}}),a=t.data,r=t.loading,c=t.error;return r?o.a.createElement("h1",null,"Loading..."):c?o.a.createElement("h1",null,"An error has occurred. $",c.message):a.user?o.a.createElement("div",null,o.a.createElement("h2",null,a.user.username),o.a.createElement("div",{className:"user-profile-avatar"},o.a.createElement(C,{uri:null===(e=a.user.avatar)||void 0===e?void 0:e.uri})),o.a.createElement("ul",{className:"recipes"},a.user.cookbook.recipes.map((function(e){var n=je(e.title);return o.a.createElement(E.a,{to:"/recipes-app/".concat(n,"/").concat(e.id),key:e.id,className:"recipe"},o.a.createElement("li",null,o.a.createElement("h3",null,e.title)))})))):o.a.createElement("h3",null,"User not found")};t(102);function Ue(){var e=Object(c.a)(["\n  query Me {\n    me {\n      id\n      username\n      avatar {\n        uri\n      }\n      cookbook {\n        ...CookbookFragment\n      }\n    }\n  }\n  ","\n"]);return Ue=function(){return e},e}function Le(){var e=Object(c.a)(["\n  fragment CookbookFragment on Cookbook {\n    __typename\n    id\n    recipes {\n      ...RecipeFragment\n    }\n  }\n  ","\n"]);return Le=function(){return e},e}var Re=Object(m.gql)(Le(),ge),Fe=Object(m.gql)(Ue(),Re);var _e=function(){var e,n=Object(m.useQuery)(Fe),t=n.data,a=n.loading,r=n.error;return a?o.a.createElement("h1",null,"Loading..."):r?o.a.createElement("h1",null,"An error has occurred. $",r.message):o.a.createElement("div",{className:"body-loggedin"},o.a.createElement(xe,{rightItems:o.a.createElement(o.a.Fragment,null,o.a.createElement(Te,{username:t.me.username,uri:null===(e=t.me.avatar)||void 0===e?void 0:e.uri}),o.a.createElement(I,null))}),o.a.createElement("section",{className:"loggedin-section"},o.a.createElement(s.d,null,o.a.createElement(s.a,{exact:!0,from:"/recipes-app",to:"/recipes-app/home"}),o.a.createElement(s.b,{path:"/recipes-app/home",render:function(){return o.a.createElement(ke,{cookbookId:t.me.cookbook.id,recipes:t.me.cookbook.recipes})}}),o.a.createElement(s.b,{path:"/recipes-app/account-settings",render:function(){var e;return o.a.createElement(D,{username:t.me.username,uri:null===(e=t.me.avatar)||void 0===e?void 0:e.uri})}}),o.a.createElement(s.b,{path:"/recipes-app/users/:username",component:Me}),o.a.createElement(s.b,{path:"/recipes-app/search/:value",component:Se}),o.a.createElement(s.b,{path:"/recipes-app/:recipeTitle/:recipeId",component:qe}))))};t(65);function Pe(){var e=Object(c.a)(["\n  mutation Login($email: String!, $password: String!) {\n    login(email: $email, password: $password) {\n      success\n      message\n      me {\n        token\n      }\n    }\n  }\n"]);return Pe=function(){return e},e}var Be=Object(m.gql)(Pe());var Qe=function(){var e=Object(i.useState)(null),n=Object(a.a)(e,2),t=n[0],r=n[1],c=Object(i.useState)(""),l=Object(a.a)(c,2),u=l[0],s=l[1],d=Object(i.useState)(""),p=Object(a.a)(d,2),v=p[0],b=p[1],g=Object(m.useApolloClient)(),E=Object(m.useMutation)(Be,{onCompleted:function(e){e.login.success?(localStorage.setItem("token",e.login.me.token),g.cache.reset()):r(e.login.message)}}),h=Object(a.a)(E,2),I=h[0];return h[1].error?o.a.createElement("h1",null,"An error has ocurred"):o.a.createElement("div",{className:"login-signup-card"},o.a.createElement("form",{onSubmit:function(e){e.preventDefault(),I({variables:{email:u,password:v}})}},o.a.createElement("input",{name:"email",className:"login-signup-input",placeholder:"E-mail",value:u,onChange:function(e){s(e.target.value)}}),o.a.createElement("input",{type:"password",name:"password",className:"login-signup-input",placeholder:"Password",value:v,onChange:function(e){b(e.target.value)}}),o.a.createElement("div",{className:"login-signup-btn"},o.a.createElement(f,{type:"submit",actionType:"default"},"Login"))),t&&o.a.createElement("p",{className:"error-message"},t))};function ze(){var e=Object(c.a)(["\n  mutation CreateUser(\n    $email: String!\n    $username: String!\n    $password: String!\n    $confirmPassword: String!\n  ) {\n    signup(\n      email: $email\n      username: $username\n      password: $password\n      confirmPassword: $confirmPassword\n    ) {\n      __typename\n      success\n      message\n      me {\n        username\n        token\n      }\n    }\n  }\n"]);return ze=function(){return e},e}var Je,Ke=Object(m.gql)(ze());!function(e){e.standart="standart",e.valid="valid",e.invalid="invalid"}(Je||(Je={}));var We=function(){var e=Object(i.useState)(null),n=Object(a.a)(e,2),t=n[0],r=n[1],c=Object(i.useState)(""),l=Object(a.a)(c,2),u=l[0],s=l[1],d=Object(i.useState)(""),p=Object(a.a)(d,2),v=p[0],b=p[1],g=Object(i.useState)(""),E=Object(a.a)(g,2),h=E[0],I=E[1],O=Object(i.useState)(""),k=Object(a.a)(O,2),j=k[0],$=k[1],y=Object(m.useApolloClient)(),C=Object(m.useMutation)(Ke,{onCompleted:function(e){e.signup.success?(localStorage.setItem("token",e.signup.me.token),y.cache.reset()):r(e.signup.message)}}),S=Object(a.a)(C,2),x=S[0];if(S[1].error)return o.a.createElement("h1",null,"An error has ocurred");var w=function(e){var n=new RegExp("^(?=.*[0-9])(?=.*[a-z])(?=.*[A-Z])(?=.*[a-zA-Z]).{8,12}$");if(e.length<8)return Je.standart;return n.test(e)?Je.valid:Je.invalid}(h),N=function(e,n){if(e.length<8)return Je.standart;return e!==n?Je.invalid:Je.valid}(j,h);return o.a.createElement("div",{className:"login-signup-card"},o.a.createElement("form",{onSubmit:function(e){e.preventDefault(),x({variables:{email:u,username:v,password:h,confirmPassword:j}})}},o.a.createElement("input",{className:"login-signup-input",placeholder:"E-mail",value:u,onChange:function(e){return s(e.target.value)}}),o.a.createElement("input",{className:"login-signup-input",placeholder:"Username",value:v,onChange:function(e){return b(e.target.value)}}),o.a.createElement("div",null,"invalid"===w&&o.a.createElement("p",{className:"error-message"},"Invalid password format"),o.a.createElement("input",{className:"login-signup-input ".concat(w),type:"password",placeholder:"Password eg.: p@SSword2020",onChange:function(e){I(e.target.value)}})),o.a.createElement("div",null,"invalid"===N&&o.a.createElement("p",{className:"error-message"},"Passwords do not match"),o.a.createElement("input",{className:"login-signup-input ".concat(N),type:"password",placeholder:"Confirm Password",onChange:function(e){$(e.target.value)}})),o.a.createElement("ul",{className:"password-hint"},"Your password must:",o.a.createElement("li",null,"be betweem 8 and 12 characters;"),o.a.createElement("li",null,"contain at least 1 number;"),o.a.createElement("li",null,"contain at least 1 uppercase and lowercase letters of each.")),o.a.createElement("div",{className:"login-signup-btn"},o.a.createElement(f,{type:"submit",actionType:"default"},"Signup"))),t&&o.a.createElement("p",{className:"error-message"},t))};var Ye=function(){var e=Object(i.useState)(!1),n=Object(a.a)(e,2),t=n[0],r=n[1],c=Object(i.useState)(!1),l=Object(a.a)(c,2),u=l[0],s=l[1];return o.a.createElement(o.a.Fragment,null,o.a.createElement("h1",null,"Cookbook"),o.a.createElement("div",{className:"buttons"},o.a.createElement("div",null,o.a.createElement(f,{type:"button",actionType:"default",handleOnClick:function(){r(!0),s(!1)}},"Login")),o.a.createElement("div",null,o.a.createElement(f,{type:"button",actionType:"default",handleOnClick:function(){s(!0),r(!1)}},"Signin"))),o.a.createElement("div",null,t&&o.a.createElement(Qe,null),u&&o.a.createElement(We,null)))};t(103);var Ze=function(){return o.a.createElement("div",{className:"body-loggedout"},o.a.createElement(xe,null),o.a.createElement("section",{className:"loggedout-section"},o.a.createElement(s.d,null,o.a.createElement(s.a,{from:"/recipes-app/home",to:"/recipes-app"}),o.a.createElement(s.b,{exact:!0,path:"/recipes-app",component:Ye}),o.a.createElement(s.b,{path:"/recipes-app/users/:username",component:Me}),o.a.createElement(s.b,{path:"/recipes-app/search/:value",component:Se}),o.a.createElement(s.b,{path:"/recipes-app/:recipeTitle/:recipeId",component:qe}))))};t(104);function He(){var e=Object(c.a)(["\n  query IsLoggedIn {\n    me {\n      id\n    }\n  }\n"]);return He=function(){return e},e}var Ge=Object(m.gql)(He()),Ve=Object(p.createUploadLink)({uri:"https://rocky-oasis-65465.herokuapp.com/graphql"}),Xe=new m.ApolloLink((function(e,n){return e.setContext((function(e){var n=e.headers,t=void 0===n?{}:n;return{headers:Object(r.a)(Object(r.a)({},t),{},{authorization:localStorage.getItem("token")||null,"client-name":"recipes-app","client-version":"1.0.0"})}})),n(e)})),en=new m.InMemoryCache({typePolicies:{Cookbook:{fields:{recipes:{merge:function(){var e=arguments.length>1?arguments[1]:void 0;return e}}}},Recipe:{fields:{ingredients:{merge:function(){var e=arguments.length>1?arguments[1]:void 0;return e}},instructions:{merge:function(){var e=arguments.length>1?arguments[1]:void 0;return e}}}}}}),nn=new m.ApolloClient({link:Xe.concat(Ve),cache:en,typeDefs:g,resolvers:{}}),tn=Object(d.a)();function an(){var e,n=Object(i.useState)("hidden"),t=Object(a.a)(n,2),r=t[0],c=t[1],l=Object(m.useQuery)(Ge).data,u=function(){window.scrollY<=260?c("hidden"):c("showed")};return Object(i.useEffect)((function(){return window.addEventListener("scroll",u),function(){return window.removeEventListener("scroll",u)}})),o.a.createElement(o.a.Fragment,null,(null===l||void 0===l||null===(e=l.me)||void 0===e?void 0:e.id)?o.a.createElement(_e,null):o.a.createElement(Ze,null),o.a.createElement("div",{className:"back-to-top-icon ".concat(r),title:"back to top"},o.a.createElement(f,{type:"button",actionType:"default",handleOnClick:function(){window.scrollTo(0,0)}},o.a.createElement(h,{icon:"keyboard_arrow_up"}))))}u.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(m.ApolloProvider,{client:nn},o.a.createElement(s.c,{history:tn},o.a.createElement(an,null)))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},65:function(e,n,t){},74:function(e,n,t){e.exports=t.p+"static/media/chinchilla.744b6572.jpg"},76:function(e,n,t){e.exports=t(109)},81:function(e,n,t){},91:function(e,n,t){},92:function(e,n,t){},93:function(e,n,t){},94:function(e,n,t){},95:function(e,n,t){},96:function(e,n,t){},97:function(e,n,t){},98:function(e,n,t){},99:function(e,n,t){}},[[76,1,2]]]);
//# sourceMappingURL=main.544815be.chunk.js.map